<<<<<<< HEAD
on: push
name: Deploy website on push
jobs:
  web-deploy:
    name: Deploy
    runs-on: self-hosted
    steps:
    - name: Get latest code
      uses: actions/checkout@v2
    
    - name: Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.2.0
      with:
        server: ftp://34.79.175.50
        username: bitnami
        password: ${{ secrets.ftp_password }}
=======
common:
  labels:
    gitsha: ${{GITHUB_SHA}}

deploys:
  - name: pfuna
    region: EUROPE-WEST1-B
    instance_group: pfuna-group
    instance_template_base: pfuna
    instance_template: pfuna-${{GITHUB_RUN_NUMBER}}-${{GITHUB_SHA}}
    cloud_init: cloud-init.yml # see example dir
    labels: # will also have gitsha from common section
      version: ${{APP_VERSION}}
    tags:
      - deploy
    update_policy:
      min_ready_sec: 30

delete_instance_templates_after: false
>>>>>>> 61f66fa5031bcb28c1b36512d052f46ae47fb8ac
